<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Menu</title>
    <link rel="stylesheet" href="css/index.css">
    <link rel="icon" type="image/png" sizes="32x32" href="./img/favicon-32x32.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <section class="section-one homepage">
        <h1 id="announce"></h1>
        <h1 id="timer"></h1>
        <form action="index.php" method="POST">
            <input type="submit" value="Logout" name="menupage" onclick="deletecookies()">
        </form>
        <script type="text/javascript">
            function deletecookies(){
                document.cookie = "id=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
                document.cookie = "username=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
                document.cookie = "regdate=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
                console.log('Deleted');
            }
            let x = document.cookie;
            x = x.split(";")

            let name = x.filter((v) => {return v.startsWith(" username")? v : ""});
            name = JSON.stringify(name).split("=").pop().split('"')[0];

            let id = x.filter((v) => {return v.startsWith(" id")? v : ""});
            id = JSON.stringify(id).split("=").pop().split('"')[0];

            let regdate = x.filter((v) => {return v.startsWith(" regdate")? v : ""});
            ragdate = JSON.stringify(id).split("=").pop().split('"')[0];
            
            document.getElementById("announce").innerHTML = "Hey "+name+", Your ID is: "+id;

            var ti = setInterval(function() {
                let date = new Date(regdate);
                date.setDate(date.getDate() + 7);
                // Get today's date and time
                var now = new Date();
                
                // Find the distance between now and the count down date
                var diff = new Date(date.getTime() - now.getTime());
                
                // Time calculations for days, hours, minutes and seconds
                var days = diff.getUTCDate()-1;
                let hours = diff.getUTCHours();
                let minutes = diff.getUTCMinutes();
                let seconds = diff.getUTCSeconds();
                
                // Output the result in an element with id="timer"
                document.getElementById("timer").innerHTML = days + "d : " + hours + "h : "
                + minutes + "m : " + seconds + "s ";
                
                // If the count down is over, write some text 
                if (diff < 0) {
                    clearInterval(x);
                    document.getElementById("timer").innerHTML = "EXPIRED";
                }
            }, 1000);
        </script>
    </section>
    <script src="./JS/index.js"></script>
</body>
</html>

